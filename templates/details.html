{% extends "base.html" %}

{% block content %}
<section class="details-page">
    <div class="detail-shell">
        <div class="detail-header">
            <div>
                <p class="detail-eyebrow">View details</p>
                <h1>{{ car.brand }} {{ car.model }}</h1>
                <p class="detail-meta">{{ car.year }} • {{ car.engine }}L • {{ car.city }}</p>
            </div>
            <div class="detail-price-badge">
                <span>Price</span>
                <strong>{{ car.price }} {{ car.currency }}</strong>
                <p>Views: {{ car.views|default(0) }}</p>
            </div>
        </div>

        <div class="detail-grid">
            <div class="detail-gallery">
                <div class="main-image">
                    <img id="mainImage" src="{{ car.images[0] }}" alt="{{ car.brand }} {{ car.model }}"
                        onerror="this.src='https://via.placeholder.com/800x600?text=No+Image'">
                </div>
                {% if car.images|length > 1 %}
                <div class="thumbs">
                    {% for img in car.images %}
                    <img class="thumb" data-src="{{ img }}" src="{{ img }}" alt="thumb"
                        onerror="this.src='https://via.placeholder.com/120x90?text=No+Image'">
                    {% endfor %}
                </div>
                {% endif %}
            </div>

            <div class="detail-card">
                <div class="detail-tags">
                    <span class="chip">{{ car.year }}</span>
                    <span class="chip">{{ car.city }}</span>
                    <span class="chip soft">Currency {{ car.currency }}</span>
                </div>
                <div class="spec-grid">
                    <div class="spec"><span>Engine</span><strong>{{ car.engine }} L</strong></div>
                    <div class="spec"><span>Mileage</span><strong>{{ car.odometer }} km</strong></div>
                    <div class="spec"><span>Posted</span><strong>{{ car.dates }}</strong></div>
                    <div class="spec"><span>Seller</span><strong>{{ car.owner.username if car.owner else 'Official'
                            }}</strong></div>
                </div>
                <div class="actions">
                    <button class="btn full"><i class="fa-solid fa-phone"></i> Contact seller (demo)</button>

                    <a class="btn ghost " href="{{ url_for('index') }}"><i class="fa-solid fa-arrow-left"></i> Back
                        to listings</a>
                </div>
                <div class="detail-assurance">
                    <i class="fa-solid fa-shield"></i>
                    <p>CarBazaar tip: verify the VIN, maintenance history and meet in public places for test drives.</p>
                </div>
            </div>
        </div>
    </div>
</section>
{% endblock %}