{% extends "base.html" %}

{% block content %}
<div style="padding: 20px 5%; max-width: 1200px; margin: 0 auto;">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2>My Ads</h2>
        {% if cars %}
        <form method="POST" action="{{ url_for('delete_all_ads') }}"
            onsubmit="return confirm('WARNING: This will delete ALL your ads permanently. Are you sure?');">
            <button type="submit" class="btn" style="background: #dc2626; border-color: #dc2626; color: white;">Delete
                All Ads</button>
        </form>
        {% endif %}
    </div>

    {% if cars %}
    <div class="grid" id="carGrid">
        {% for car in cars %}
        <div class="card" data-brand="{{ car.brand|lower }}" data-price="{{ car.price }}"
            data-city="{{ car.city|lower }}" data-currency="{{ car.currency }}">
            <img src="{{ car.images[0] }}" alt="{{ car.brand }} {{ car.model }}"
                onerror="this.src='https://via.placeholder.com/400x300?text=No+Image'">
                <div class="card-content">
                <div class="price">{{ car.price }} {{ car.currency }}</div>
                <div class="title">{{ car.brand }} {{ car.model }}</div>
                <div class="info">{{ car.year }} • {{ car.engine }}L • {{ car.odometer }} km</div>
                <div class="location">{{ car.city }} • {{ car.dates }}</div>
                <div style="display: flex; gap: 0.5rem; margin-top: 0.5rem;">
                    <a href="{{ url_for('details', id=car.id) }}" class="btn" style="flex: 1;">View Details</a>
                    <form method="POST" action="{{ url_for('delete_car', car_id=car.id) }}" style="flex: 1;"
                        onsubmit="return confirm('Are you sure you want to delete this ad?');">
                        <button type="submit" class="btn ghost"
                            style="width: 100%; background: #fee; color: #c00; border-color: #fcc;">Delete</button>
                    </form>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% else %}
    <div style="text-align: center; padding: 50px; color: #666;">
        <p>You haven't published any ads yet.</p>
        <a href="#" onclick="document.getElementById('sellBtn').click(); return false;" class="btn primary">Add your
            first car</a>
    </div>
    {% endif %}
</div>
{% endblock %}